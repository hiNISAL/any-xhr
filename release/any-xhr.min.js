!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.AnyXHR=e()}(this,function(){"use strict";var t=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}();return function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.XHR=XMLHttpRequest,this.proxyXHR=null,this.hooks=t,this.init()}return t(e,[{key:"init",value:function(){var t=this;XMLHttpRequest=function(){this._xhr=new t.XHR,t.proxyXHR=this,t.overwrite(this)}}},{key:"add",value:function(t,e){return this.hooks[t]=e,this}},{key:"overwrite",value:function(t){for(var e in t._xhr)"function"!=typeof t._xhr[e]?this.overwriteAttributes(e):this.overwriteMethod(e)}},{key:"overwriteMethod",value:function(n){var o=this.proxyXHR,i=this.hooks;o[n]=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];if(!i[n]||!1!==i[n].call(o,e))return o._xhr[n].apply(o._xhr,e)}}},{key:"overwriteAttributes",value:function(t){var e=this.proxyXHR;Object.defineProperty(e,t,this.setProperyDescriptor(t))}},{key:"setProperyDescriptor",value:function(o){var t=Object.create(null),i=this.proxyXHR,s=this;return t.set=function(n){o.startsWith("on")?s.hooks[o]?this._xhr[o]=function(){s.hooks[o](this);for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.apply(i._xhr,e)}:this._xhr[o]=n:this["__"+o]=n},t.get=function(){return this["__"+o]||this._xhr[o]},t}},{key:"rmHook",value:function(t){delete this.hooks[t]}},{key:"clearHook",value:function(){this.hooks={}}}]),e}()});
